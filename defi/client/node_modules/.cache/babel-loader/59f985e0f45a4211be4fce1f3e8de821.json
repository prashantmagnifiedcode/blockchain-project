{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\Documents\\\\blockchain\\\\defi\\\\client\\\\src\\\\components1\\\\App.js\";\nimport React, { Component } from 'react';\nimport Web3 from 'web3';\nimport DaiToken from '../abis/DaiToken.json';\nimport DappToken from '../abis/DappToken.json';\nimport TokenFarm from '../abis/TokenFarm.json';\nimport Navbar from './Navbar';\nimport Main from './Main';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends Component {\n  async componentWillMount() {\n    await this.loadWeb3();\n    await this.loadBlockchainData();\n  }\n\n  async loadBlockchainData() {\n    const web3 = window.web3;\n    const accounts = await web3.eth.getAccounts();\n    this.setState({\n      account: accounts[0]\n    });\n    const networkId = await web3.eth.net.getId(); // Load DaiToken\n\n    const daiTokenData = DaiToken.networks[networkId];\n\n    if (daiTokenData) {\n      const daiToken = new web3.eth.Contract(DaiToken.abi, daiTokenData.address);\n      this.setState({\n        daiToken\n      });\n      let daiTokenBalance = await daiToken.methods.balanceOf(this.state.account).call();\n      this.setState({\n        daiTokenBalance: daiTokenBalance.toString()\n      });\n    } else {\n      window.alert('DaiToken contract not deployed to detected network.');\n    } // Load DappToken\n\n\n    const dappTokenData = DappToken.networks[networkId];\n\n    if (dappTokenData) {\n      const dappToken = new web3.eth.Contract(DappToken.abi, dappTokenData.address);\n      this.setState({\n        dappToken\n      });\n      let dappTokenBalance = await dappToken.methods.balanceOf(this.state.account).call();\n      this.setState({\n        dappTokenBalance: dappTokenBalance.toString()\n      });\n    } else {\n      window.alert('DappToken contract not deployed to detected network.');\n    } // Load TokenFarm\n\n\n    const tokenFarmData = TokenFarm.networks[networkId];\n\n    if (tokenFarmData) {\n      const tokenFarm = new web3.eth.Contract(TokenFarm.abi, tokenFarmData.address);\n      this.setState({\n        tokenFarm\n      });\n      let stakingBalance = await tokenFarm.methods.stakingBalance(this.state.account).call();\n      this.setState({\n        stakingBalance: stakingBalance.toString()\n      });\n    } else {\n      window.alert('TokenFarm contract not deployed to detected network.');\n    }\n\n    this.setState({\n      loading: false\n    });\n  }\n\n  async loadWeb3() {\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum);\n      await window.ethereum.enable();\n    } else if (window.web3) {\n      window.web3 = new Web3(window.web3.currentProvider);\n    } else {\n      window.alert('Non-Ethereum browser detected. You should consider trying MetaMask!');\n    }\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.stakeTokens = amount => {\n      this.setState({\n        loading: true\n      });\n      this.state.daiToken.methods.approve(this.state.tokenFarm._address, amount).send({\n        from: this.state.account\n      }).on('transactionHash', hash => {\n        this.state.tokenFarm.methods.stakeTokens(amount).send({\n          from: this.state.account\n        }).on('transactionHash', hash => {\n          this.setState({\n            loading: false\n          });\n        });\n      });\n    };\n\n    this.unstakeTokens = amount => {\n      this.setState({\n        loading: true\n      });\n      this.state.tokenFarm.methods.unstakeTokens().send({\n        from: this.state.account\n      }).on('transactionHash', hash => {\n        this.setState({\n          loading: false\n        });\n      });\n    };\n\n    this.state = {\n      account: '0x0',\n      daiToken: {},\n      dappToken: {},\n      tokenFarm: {},\n      daiTokenBalance: '0',\n      dappTokenBalance: '0',\n      stakingBalance: '0',\n      loading: true\n    };\n  }\n\n  render() {\n    let content;\n\n    if (this.state.loading) {\n      content = /*#__PURE__*/_jsxDEV(\"p\", {\n        id: \"loader\",\n        className: \"text-center\",\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this);\n    } else {\n      content = /*#__PURE__*/_jsxDEV(Main, {\n        daiTokenBalance: this.state.daiTokenBalance,\n        dappTokenBalance: this.state.dappTokenBalance,\n        stakingBalance: this.state.stakingBalance,\n        stakeTokens: this.stakeTokens,\n        unstakeTokens: this.unstakeTokens\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {\n        account: this.state.account\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-fluid mt-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"main\", {\n            role: \"main\",\n            className: \"col-lg-12 ml-auto mr-auto\",\n            style: {\n              maxWidth: '600px'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"content mr-auto ml-auto\",\n              children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"http://www.dappuniversity.com/bootcamp\",\n                target: \"_blank\",\n                rel: \"noopener noreferrer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 17\n              }, this), content]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"names":["React","Component","Web3","DaiToken","DappToken","TokenFarm","Navbar","Main","App","componentWillMount","loadWeb3","loadBlockchainData","web3","window","accounts","eth","getAccounts","setState","account","networkId","net","getId","daiTokenData","networks","daiToken","Contract","abi","address","daiTokenBalance","methods","balanceOf","state","call","toString","alert","dappTokenData","dappToken","dappTokenBalance","tokenFarmData","tokenFarm","stakingBalance","loading","ethereum","enable","currentProvider","constructor","props","stakeTokens","amount","approve","_address","send","from","on","hash","unstakeTokens","render","content","maxWidth"],"sources":["C:/Users/admin/Documents/blockchain/defi/client/src/components1/App.js"],"sourcesContent":["import React, { Component } from 'react'\r\nimport Web3 from 'web3'\r\nimport DaiToken from '../abis/DaiToken.json'\r\nimport DappToken from '../abis/DappToken.json'\r\nimport TokenFarm from '../abis/TokenFarm.json'\r\nimport Navbar from './Navbar'\r\nimport Main from './Main'\r\nimport './App.css'\r\n\r\nclass App extends Component {\r\n\r\n  async componentWillMount() {\r\n    await this.loadWeb3()\r\n    await this.loadBlockchainData()\r\n  }\r\n\r\n  async loadBlockchainData() {\r\n    const web3 = window.web3\r\n\r\n    const accounts = await web3.eth.getAccounts()\r\n    this.setState({ account: accounts[0] })\r\n\r\n    const networkId = await web3.eth.net.getId()\r\n\r\n    // Load DaiToken\r\n    const daiTokenData = DaiToken.networks[networkId]\r\n    if(daiTokenData) {\r\n      const daiToken = new web3.eth.Contract(DaiToken.abi, daiTokenData.address)\r\n      this.setState({ daiToken })\r\n      let daiTokenBalance = await daiToken.methods.balanceOf(this.state.account).call()\r\n      this.setState({ daiTokenBalance: daiTokenBalance.toString() })\r\n    } else {\r\n      window.alert('DaiToken contract not deployed to detected network.')\r\n    }\r\n\r\n    // Load DappToken\r\n    const dappTokenData = DappToken.networks[networkId]\r\n    if(dappTokenData) {\r\n      const dappToken = new web3.eth.Contract(DappToken.abi, dappTokenData.address)\r\n      this.setState({ dappToken })\r\n      let dappTokenBalance = await dappToken.methods.balanceOf(this.state.account).call()\r\n      this.setState({ dappTokenBalance: dappTokenBalance.toString() })\r\n    } else {\r\n      window.alert('DappToken contract not deployed to detected network.')\r\n    }\r\n\r\n    // Load TokenFarm\r\n    const tokenFarmData = TokenFarm.networks[networkId]\r\n    if(tokenFarmData) {\r\n      const tokenFarm = new web3.eth.Contract(TokenFarm.abi, tokenFarmData.address)\r\n      this.setState({ tokenFarm })\r\n      let stakingBalance = await tokenFarm.methods.stakingBalance(this.state.account).call()\r\n      this.setState({ stakingBalance: stakingBalance.toString() })\r\n    } else {\r\n      window.alert('TokenFarm contract not deployed to detected network.')\r\n    }\r\n\r\n    this.setState({ loading: false })\r\n  }\r\n\r\n  async loadWeb3() {\r\n    if (window.ethereum) {\r\n      window.web3 = new Web3(window.ethereum)\r\n      await window.ethereum.enable()\r\n    }\r\n    else if (window.web3) {\r\n      window.web3 = new Web3(window.web3.currentProvider)\r\n    }\r\n    else {\r\n      window.alert('Non-Ethereum browser detected. You should consider trying MetaMask!')\r\n    }\r\n  }\r\n\r\n  stakeTokens = (amount) => {\r\n    this.setState({ loading: true })\r\n    this.state.daiToken.methods.approve(this.state.tokenFarm._address, amount).send({ from: this.state.account }).on('transactionHash', (hash) => {\r\n      this.state.tokenFarm.methods.stakeTokens(amount).send({ from: this.state.account }).on('transactionHash', (hash) => {\r\n        this.setState({ loading: false })\r\n      })\r\n    })\r\n  }\r\n\r\n  unstakeTokens = (amount) => {\r\n    this.setState({ loading: true })\r\n    this.state.tokenFarm.methods.unstakeTokens().send({ from: this.state.account }).on('transactionHash', (hash) => {\r\n      this.setState({ loading: false })\r\n    })\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      account: '0x0',\r\n      daiToken: {},\r\n      dappToken: {},\r\n      tokenFarm: {},\r\n      daiTokenBalance: '0',\r\n      dappTokenBalance: '0',\r\n      stakingBalance: '0',\r\n      loading: true\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let content\r\n    if(this.state.loading) {\r\n      content = <p id=\"loader\" className=\"text-center\">Loading...</p>\r\n    } else {\r\n      content = <Main\r\n        daiTokenBalance={this.state.daiTokenBalance}\r\n        dappTokenBalance={this.state.dappTokenBalance}\r\n        stakingBalance={this.state.stakingBalance}\r\n        stakeTokens={this.stakeTokens}\r\n        unstakeTokens={this.unstakeTokens}\r\n      />\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <Navbar account={this.state.account} />\r\n        <div className=\"container-fluid mt-5\">\r\n          <div className=\"row\">\r\n            <main role=\"main\" className=\"col-lg-12 ml-auto mr-auto\" style={{ maxWidth: '600px' }}>\r\n              <div className=\"content mr-auto ml-auto\">\r\n                <a\r\n                  href=\"http://www.dappuniversity.com/bootcamp\"\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                >\r\n                </a>\r\n\r\n                {content}\r\n\r\n              </div>\r\n            </main>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}